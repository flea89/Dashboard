angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.position","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/typeahead/typeahead.html"]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function i(e,i){return e.currentStyle?e.currentStyle[i]:t.getComputedStyle?t.getComputedStyle(e)[i]:e.style[i]}function a(e){return"static"===(i(e,"position")||"static")}var n=function(t){for(var i=e[0],n=t.offsetParent||i;n&&n!==i&&a(n);)n=n.offsetParent;return n||i};return{position:function(t){var i=this.offset(t),a={top:0,left:0},o=n(t[0]);return o!=e[0]&&(a=this.offset(angular.element(o)),a.top+=o.clientTop,a.left+=o.clientLeft),{width:t.prop("offsetWidth"),height:t.prop("offsetHeight"),top:i.top-a.top,left:i.left-a.left}},offset:function(i){var a=i[0].getBoundingClientRect();return{width:i.prop("offsetWidth"),height:i.prop("offsetHeight"),top:a.top+(t.pageYOffset||e[0].body.scrollTop),left:a.left+(t.pageXOffset||e[0].body.scrollLeft)}}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(i){var a=i.match(t);if(!a)throw Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+i+"'.");return{itemName:a[3],source:e(a[4]),viewMapper:e(a[2]||a[1]),modelMapper:e(a[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$document","$position","typeaheadParser",function(e,t,i,a,n,o){var r=[9,13,27,38,40];return{require:"ngModel",link:function(p,c,s,l){var u,f=p.$eval(s.typeaheadMinLength)||1,h=o.parse(s.typeahead),d=p.$eval(s.typeaheadEditable)!==!1,v=t(s.typeaheadLoading).assign||angular.noop,m=angular.element("<typeahead-popup matches='matches' active='activeIdx' select='select(activeIdx)' query='query' position='position'></typeahead-popup>"),g=p.$new();p.$on("$destroy",function(){g.$destroy()});var y=function(){g.matches=[],g.activeIdx=-1},$=function(e){var t={$viewValue:e};v(p,!0),i.when(h.source(g,t)).then(function(i){if(e===l.$viewValue){if(i.length>0){g.activeIdx=0,g.matches.length=0;for(var a=0;i.length>a;a++)t[h.itemName]=i[a],g.matches.push({label:h.viewMapper(g,t),model:i[a]});g.query=e,g.position=n.position(c),g.position.top=g.position.top+c.prop("offsetHeight")}else y();v(p,!1)}},function(){y(),v(p,!1)})};y(),g.query=void 0,l.$parsers.push(function(e){return y(),u?e:(e&&e.length>=f&&$(e),d?e:void 0)}),l.$render=function(){var e={};e[h.itemName]=u||l.$viewValue,c.val(h.viewMapper(g,e)||l.$viewValue),u=void 0},g.select=function(e){var t={};t[h.itemName]=u=g.matches[e].model,l.$setViewValue(h.modelMapper(g,t)),l.$render()},c.bind("keydown",function(e){0!==g.matches.length&&-1!==r.indexOf(e.which)&&(e.preventDefault(),40===e.which?(g.activeIdx=(g.activeIdx+1)%g.matches.length,g.$digest()):38===e.which?(g.activeIdx=(g.activeIdx?g.activeIdx:g.matches.length)-1,g.$digest()):13===e.which||9===e.which?g.$apply(function(){g.select(g.activeIdx)}):27===e.which&&(e.stopPropagation(),y(),g.$digest()))}),a.bind("click",function(){y(),g.$digest()}),c.after(e(m)(g))}}}]).directive("typeaheadPopup",function(){return{restrict:"E",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead.html",link:function(e){e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,i){return i?t.replace(RegExp(e(i),"gi"),"<strong>$&</strong>"):i}}),angular.module("template/typeahead/typeahead.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead.html",'<div class="dropdown clearfix" ng-class="{open: isOpen()}">    <ul class="typeahead dropdown-menu">        <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)">            <a tabindex="-1" ng-click="selectMatch($index)" ng-bind-html-unsafe="match.label | typeaheadHighlight:query"></a>        </li>    </ul></div>')}]);